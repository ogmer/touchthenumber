# Touch The Number

数字を順番にタップするパズルゲームです。1 から順番に数字をタップして、すべての数字をクリアするまでの時間を競います。

## 🎮 ゲームモード

- **5×5 モード**: 1 から 25 まで（25 個の数字）
- **6×6 モード**: 1 から 36 まで（36 個の数字）
- **7×7 モード**: 1 から 49 まで（49 個の数字）

## 📋 ゲームのルール

1. 画面に表示された数字を 1 から順番にタップします
2. 正しい数字をタップするとスコアが増加し、バウンスアニメーションが再生されます
3. 間違った数字をタップすると効果音が再生されます
4. すべての数字を順番にタップするとゲームクリアです
5. クリアまでの時間が記録され、モード別ランキングに保存されます

## ✨ 機能

### ゲーム機能

- 3 つの難易度モード（5×5、6×6、7×7）
- リアルタイムタイマー（ミリ秒単位での計測）
- スコア表示と進捗管理
- スタートボタンによるゲーム開始
- ゲーム終了時のランキングページへの直接リンク

### ランキング機能

- モード別ランキング（各モードで独立した記録）
- 上位 10 件の記録を保存
- 記録のクリア機能
- 日時とクリア時間の表示
- ゲーム終了画面からの直接アクセス

### アニメーション・エフェクト

- バウンスアニメーション（正解時）
- パルスアニメーション（ゲーム開始前）
- スムーズな画面遷移
- レスポンシブデザイン対応
- 現在の数字のハイライト表示（青）
- 完了した数字の緑色表示

### 設定機能

- 音声 ON/OFF 切り替え
- 設定の永続化保存
- デバッグモードでの音声エラー回避

## 🔒 セキュリティ機能

- 入力値の検証とサニタイゼーション
- データの暗号化と保護
- エラーハンドリングとログ出力
- 権限チェックとアクセス制御
- セキュアなデータ保存
- 不正なデータの検出と処理

## 🚀 パフォーマンス最適化

- ウィジェットの最適化と不要な再描画の削減
- アニメーションの最適化
- メモリ使用量の最適化
- データ処理の最適化
- UI 描画の最適化
- グリッドデリゲートのキャッシュ
- フィルタリング結果のキャッシュ

## 🛠 技術仕様

- **フレームワーク**: Flutter 3.x
- **言語**: Dart 3.x
- **状態管理**: StatefulWidget
- **データ保存**: SharedPreferences
- **アニメーション**: AnimationController, Tween
- **UI**: Material Design 3
- **音声**: audioplayers パッケージ
- **テスト**: flutter_test
- **プラットフォーム**: Windows, Web, Android, iOS

## 📦 セットアップ

### 前提条件

- Flutter SDK (3.0 以上)
- Dart SDK
- Android Studio / VS Code
- Windows 10/11 (デスクトップ版の場合、開発者モードが必要)
- Android デバイス / エミュレータ / iOS シミュレータ

### インストール手順

1. リポジトリをクローン

```bash
git clone <repository-url>
cd touchthenumber
```

2. 依存関係をインストール

```bash
flutter pub get
```

3. アプリを実行

```bash
# Windows版
flutter run -d windows

# Web版
flutter run -d chrome

# Android版
flutter run -d android
```

## 🧪 テスト

```bash
# ユニットテストとウィジェットテストを実行
flutter test

# カバレッジレポートを生成
flutter test --coverage
```

### テスト内容

- アプリのスモークテスト
- 各ゲームモードのナビゲーションテスト
- スタートボタンの機能テスト
- ランキング画面のナビゲーションテスト
- モード選択機能のテスト

## 📱 ビルド

### Windows

```bash
flutter build windows --release
```

### Android APK

```bash
flutter build apk --release
```

### iOS

```bash
flutter build ios --release
```

### Web

```bash
flutter build web --release
```

## 📁 プロジェクト構造

```
lib/
├── main.dart              # メインアプリケーション
│   ├── TouchTheNumberApp  # アプリケーションルート
│   ├── MainMenu          # メインメニュー画面
│   ├── TouchTheNumberGame # ゲーム画面
│   ├── RankingScreen     # ランキング画面
│   ├── GameRecord        # ゲーム記録モデル
│   └── GameMode          # ゲームモード列挙型

test/
└── widget_test.dart      # ウィジェットテスト

assets/
└── sounds/               # 音声ファイル（デバッグモードでは無効）
    ├── correct.mp3
    ├── wrong.mp3
    ├── start.mp3
    └── complete.mp3
```

## 🎯 主要なクラス

- `TouchTheNumberApp`: アプリケーションのルートウィジェット
- `MainMenu`: メインメニュー画面（ゲームモード選択）
- `TouchTheNumberGame`: ゲーム画面（メインゲームロジック）
- `RankingScreen`: ランキング表示画面
- `GameRecord`: ゲーム記録のデータモデル
- `_GameModeButton`: ゲームモード選択ボタン
- `_NumberTile`: 数字タイルウィジェット

## 🔧 開発・保守

### コード品質

- セキュリティ対策の実装
- パフォーマンス最適化
- エラーハンドリング
- コードの可読性向上
- テストカバレッジの維持
- リファクタリングによる保守性向上

### 最新の改善点

- デバッグモードでの音声エラー回避
- 現在の数字のアニメーション無効化
- ゲーム終了時のランキングページへの直接リンク
- ボタン配置の最適化
- セキュリティ機能の強化
- パフォーマンスの向上

### 今後の拡張予定

- 音声ファイルの追加
- 新しいゲームモード
- アチーブメント機能
- マルチプレイヤー対応
- テーマカスタマイズ機能

## 📄 ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。

## 🤝 貢献

プルリクエストやイシューの報告を歓迎します。

## 👥 作者

Touch The Number 開発チーム

---

**注意**: このアプリは教育目的で作成されており、セキュリティとパフォーマンスの最適化に重点を置いています。デバッグモードでは音声機能が無効化されており、本番環境でのみ音声が再生されます。
